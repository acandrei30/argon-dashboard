{% extends "layouts/base.html" %}
{% load static %}

{% block extrastyle %}
  <!-- Page plugins -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
{% endblock extrastyle %}

{% block title %} Lead Profile {% endblock title %}

{% block content %}
<div class="container-fluid py-4">
    <!-- Header Section with Lead Info -->
    <div class="row align-items-center py-4">
        <div class="col-lg-6 col-7">
            <h1 class="text-primary d-inline">{{ lead.name }}</h1>
        </div>
        <div class="col-lg-6 col-5 text-right">
            <!-- Current Stage and Back Button -->
            <span class="badge badge-info">{{ lead.stage }}</span>
            <a href="{% url 'sales-pipeline' %}" class="btn btn-sm btn-primary"><i class="ni ni-bold-left"></i> Back to Pipeline</a>
            {% include 'sales/_lead_actions.html' %}
           
        </div>
    </div>

    <div class="card-body">
        <!-- Timeline and Note Input -->
        <div class="row">
            <div class="col-xl-8">
                {% include 'sales/_lead_form.html' %}
            </div>
            <div class="col-xl-4">
                <!-- Right Sidebar Section -->
                <div class="card">
                 
          
                    {% include 'sales/_lead_notes.html' %}
        <!-- Modal for Scheduling Consultation -->
        {% include 'sales/consultation_modal.html' %}
        {% include 'sales/_lead_consultation.html' %}
    </div>
</div>
{% endblock content %}

{% block extra_js %}
  <script>
    const csrfToken = "{{ csrf_token }}";
    const updateConsultationUrl = "{% url 'update-lead-consultation' lead.id %}";
    const updateFollowUpUrl = "{% url 'update-lead-follow-up' lead.id %}";
  </script>
  <script src="{% static 'assets/js/follow_up.js' %}"></script>
  <script src="{% static 'assets/js/consultation.js' %}"></script>
  <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
  <script src="{% static 'assets/vendor/moment/min/moment.min.js' %}"></script>
  <script src="{% static 'assets/vendor/fullcalendar/dist/fullcalendar.min.js' %}"></script>
  <script src="{% static 'assets/vendor/sweetalert2/dist/sweetalert2.min.js' %}"></script>
{% endblock extra_js %}
